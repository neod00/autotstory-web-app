# 📎 URL 기반 콘텐츠 생성 기능 가이드

## 🎯 개요

기존의 창의적 블로그 글 작성 기능에 더해, **뉴스 기사/블로그 포스트/유튜브 영상** 등의 URL을 입력하면 해당 콘텐츠를 분석하여 새로운 블로그 글을 자동 생성하는 기능이 추가되었습니다.

## ✨ 주요 기능

### 🔍 지원되는 콘텐츠 타입
- **뉴스 기사**: 네이버, 다음, 조선일보, 중앙일보, BBC, CNN 등
- **블로그 포스트**: 티스토리, 네이버 블로그, Medium, WordPress 등  
- **유튜브 영상**: 제목, 설명, 자막(가능한 경우) 추출
- **일반 웹페이지**: 기타 웹사이트의 콘텐츠

### 🤖 AI 기반 콘텐츠 재구성
- 원본 내용을 완전히 새로운 관점에서 재구성
- 사용자 지정 관점/각도 적용 가능
- 한국어 최적화된 자연스러운 글쓰기
- 실용적이고 독자 친화적인 정보 제공

### 🎨 완전한 블로그 포스트 생성
- 매력적인 제목 자동 생성
- 관련 이미지 검색 및 배치
- 구조화된 HTML 콘텐츠
- 적절한 태그와 키워드 생성
- 원본 출처 정보 포함

## 🚀 사용 방법

### 1. 콘솔 버전 (auto_post_generator_v2_complete.py)

```bash
python auto_post_generator_v2_complete.py
```

1. 프로그램 실행 후 주제 선택 메뉴에서 **"URL 링크로 글 생성"** 선택
2. URL 입력 (예: `https://news.naver.com/article/example`)
3. 선택사항: 특별한 관점이나 각도 입력
4. 자동으로 콘텐츠 분석 및 블로그 글 생성
5. 티스토리에 자동 포스팅

### 2. 웹앱 버전 (Streamlit)

```bash
# Deploy as apps 버전
cd "Deploy as apps"
streamlit run app.py

# Railway 버전  
cd Railway
streamlit run app.py
```

1. 웹브라우저에서 앱 접속
2. **"URL에서 추출"** 라디오 버튼 선택
3. URL 링크 입력 필드에 원하는 URL 입력
4. 선택사항: 관점/각도 필드에 특별한 관점 입력
5. **"포스팅 시작"** 버튼 클릭
6. 실시간 진행 상황 확인 및 자동 포스팅

### 3. 독립 테스트 (url_content_extractor.py)

```bash
python url_content_extractor.py
```

또는

```bash
python test_url_content.py
```

## 💡 사용 예시

### 예시 1: 뉴스 기사 기반
```
입력 URL: https://news.naver.com/main/read.naver?mode=LSD&mid=shm&sid1=105&oid=001&aid=0014123456
관점: 일반인 관점에서 쉽게 이해할 수 있도록
```

### 예시 2: 유튜브 영상 기반
```
입력 URL: https://www.youtube.com/watch?v=dQw4w9WgXcQ
관점: 실무진 입장에서 실용적 팁 중심으로
```

### 예시 3: 블로그 포스트 기반
```
입력 URL: https://someone.tistory.com/123
관점: 초보자도 따라할 수 있는 단계별 가이드로
```

## 🔧 설치 및 설정

### 1. 필수 라이브러리 설치
```bash
pip install -r requirements.txt
```

### 2. 새로 추가된 라이브러리
- `youtube-transcript-api>=0.6.0`: 유튜브 자막 추출
- `newspaper3k>=0.2.8`: 뉴스/블로그 콘텐츠 추출 (기존)
- `beautifulsoup4>=4.12.0`: HTML 파싱 (기존)

### 3. API 키 설정
`.env` 파일에 다음 설정이 필요합니다:
```
OPENAI_API_KEY=your_openai_api_key_here
```

## 🎨 생성되는 콘텐츠 구성

### HTML 구조
- **헤더**: 매력적인 제목과 대표 이미지
- **서론**: 주제 소개 및 흥미 유발
- **본문**: 구조화된 내용 (소제목, 이미지, 표 포함)
- **결론**: 핵심 요약 및 마무리
- **출처**: 원본 링크 및 참고 정보

### 자동 생성 요소
- 🏷️ **태그**: 관련 키워드 기반 자동 생성
- 🖼️ **이미지**: Unsplash API를 통한 관련 이미지 검색
- 📊 **표**: 정보가 있는 경우 요약 표 생성
- ❓ **FAQ**: 콘텐츠가 충분한 경우 FAQ 섹션 추가

## 🔍 기술적 특징

### 콘텐츠 추출 방식
- **뉴스**: `newspaper3k` + `BeautifulSoup` 조합
- **블로그**: CSS 선택자 기반 스마트 추출
- **유튜브**: 메타데이터 + 자막 API 활용
- **일반**: 다양한 콘텐츠 패턴 대응

### AI 처리 과정
1. **원본 분석**: 제목, 내용, 메타데이터 추출
2. **맥락 이해**: GPT-4o-mini를 통한 내용 분석
3. **관점 적용**: 사용자 지정 관점 반영
4. **재구성**: 완전히 새로운 구조로 글 작성
5. **최적화**: 블로그 독자 친화적 형태로 변환

## ⚠️ 주의사항

### 저작권 준수
- 원본 콘텐츠를 완전히 복사하지 않고 재구성합니다
- 원본 출처를 명확히 표시합니다
- 공정 이용 범위 내에서 참고 자료로 활용합니다

### 콘텐츠 품질
- AI가 생성한 내용이므로 사실 확인이 필요할 수 있습니다
- 원본과 다른 관점에서 재해석된 내용입니다
- 전문적인 내용은 추가 검토를 권장합니다

### 기술적 제한
- 일부 사이트는 접근 제한이 있을 수 있습니다
- 유튜브 자막은 자동 생성된 경우 부정확할 수 있습니다
- 네트워크 상태에 따라 처리 시간이 달라질 수 있습니다

## 🛠️ 문제 해결

### 자주 발생하는 문제

#### 1. URL 콘텐츠 추출 실패
```
❌ URL 콘텐츠 추출 실패: HTTP 403 Forbidden
```
**해결책**: 다른 URL 시도 또는 VPN 사용

#### 2. 유튜브 자막 추출 실패
```
⚠️ youtube-transcript-api가 설치되지 않아 유튜브 자막 추출 기능이 제한됩니다.
```
**해결책**: 
```bash
pip install youtube-transcript-api
```

#### 3. OpenAI API 오류
```
❌ OpenAI API 키가 설정되지 않았습니다.
```
**해결책**: `.env` 파일에 `OPENAI_API_KEY` 설정

### 디버깅 방법
```bash
# 테스트 스크립트 실행
python test_url_content.py

# 개별 모듈 테스트
python url_content_extractor.py
```

## 📈 향후 개선 계획

- [ ] 더 많은 웹사이트 지원
- [ ] 실시간 팩트체킹 기능
- [ ] 이미지 내 텍스트 추출
- [ ] 다국어 콘텐츠 지원
- [ ] 사용자 선호 스타일 학습

## 🤝 기여하기

새로운 웹사이트 지원이나 기능 개선 아이디어가 있으시면 이슈를 등록해주세요!

---

**🎉 이제 어떤 웹 콘텐츠든 나만의 블로그 글로 재탄생시킬 수 있습니다!** 